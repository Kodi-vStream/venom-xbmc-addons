import os, sys; sys.path.append(os.path.dirname(os.path.dirname(os.path.realpath(__file__))))
from lib.patch_sys_path import patch_path

from resources.sites.elitegol import reveal_pipe_split

def test_09aZ1099():
    html = 'return p}(\'4 2={r:s,q:p,n:3,o:{t:0,u:"A://z.y.v",m:0,B:0,i:c}};4 1=9 8.d({k:"j/x-g",h:"l://f.a/b/w/Q.U?C=14-V&e=S",T:"#1",Y:"5%",13:"5%",12:0,11:0,Z:0,10:[X],R:{2:2},H:"I",G:0,F:"D",E:{J:"#6",K:"#6"},P:{O:7(e){N(7(){1.L(1.M)},W)}}});\',62,67,\'true|player|hlsjsConfig||var|100|c466e0|function|Clappr|new|click|hls|false|Player||onestream|mpegURL|source|showSlogan|application|mimeType|https|p2pEnabled|liveSyncDurationCount|p2pConfig|20|maxBufferLength|maxBufferSize|30|live|wsSignalerAddr|com|bV0f1SLNSVTD||cdnbye|signalcloud|wss|useHttpRange|st|auto|mediacontrol|preload|disableErrorScreen|stretching|bestfit|seekbar|buttons|configure|options|setTimeout|onError|events|index|playback|1743351719|parentId|m3u8|P9A|1000|CDNByeClapprPlugin|width|muted|plugins|mute|autoPlay|height|OgB7vD53K6vIKfY1F0\'.split(\'|\')'
    decoded = reveal_pipe_split(html)
    assert decoded == '(\'var hlsjsConfig={maxBufferSize:30,maxBufferLength:20,liveSyncDurationCount:3,p2pConfig:{live:true,wsSignalerAddr:"wss://signalcloud.cdnbye.com",p2pEnabled:true,useHttpRange:true,showSlogan:false}};var player=new Clappr.Player({mimeType:"application/x-mpegURL",source:"https://onestream.click/hls/bV0f1SLNSVTD/index.m3u8?st=OgB7vD53K6vIKfY1F0-P9A&e=1743351719",parentId:"#player",width:"100%",height:"100%",autoPlay:true,mute:true,muted:true,plugins:[CDNByeClapprPlugin],playback:{hlsjsConfig:hlsjsConfig},stretching:"bestfit",disableErrorScreen:true,preload:"auto",mediacontrol:{seekbar:"#c466e0",buttons:"#c466e0"},events:{onError:function(e){setTimeout(function(){player.configure(player.options)},1000)}}});\',62,67'

def test_099():
    html = r'''return p}(\'88(87(){$("86").85("<1 3="84" 22="21" 20="19" 18="17://83.82.81/80/79" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="78" 22="21" 20="19" 18="17://77.76/75?74=73" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="72" 22="21" 20="19" 18="17://27.26.25/24.23?3=71" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="70" 22="21" 20="19" 18="17://27.26.25/24.23?3=69" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="68" 22="21" 20="19" 18="17://27.26.25/24.23?3=67" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="66" 22="21" 20="19" 18="17://27.26.25/24.23?3=65" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="64" 22="21" 20="19" 18="17://27.26.25/24.23?3=63" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="62" 22="21" 20="19" 18="17://27.26.25/24.23?3=61" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="60" 22="21" 20="19" 18="17://27.26.25/24.23?3=59" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="58" 22="21" 20="19" 18="17://27.26.25/24.23?3=57" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="56" 22="21" 20="19" 18="17://27.26.25/24.23?3=55" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="54" 22="21" 20="19" 18="17://27.26.25/24.23?3=53" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="52" 22="21" 20="19" 18="17://27.26.25/24.23?3=51" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="50" 22="21" 20="19" 18="17://27.26.25/24.23?3=49" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="48" 22="21" 20="19" 18="17://27.26.25/24.23?3=47" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="46" 22="21" 20="19" 18="17://27.26.25/24.23?3=45" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="44" 22="21" 20="19" 18="17://27.26.25/24.23?3=43" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="42" 22="21" 20="19" 18="17://27.26.25/24.23?3=41" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="40" 22="21" 20="19" 18="17://27.26.25/24.23?3=39" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="38" 22="21" 20="19" 18="17://27.26.25/24.23?3=37" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="36" 22="21" 20="19" 18="17://27.26.25/24.23?3=35" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="34" 22="21" 20="19" 18="17://27.26.25/24.23?3=33" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="32" 22="21" 20="19" 18="17://27.26.25/24.23?3=31" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1><1 3="30" 22="21" 20="19" 18="17://27.26.25/24.23?3=29" 16="15:14;13:12;11:-2;10:-2;" 9="0-8-7 0-6 0-5 0-4"></1>")},28);\',10,89,\'allow|iframe|5000px|id|forms|popups|scripts|origin|same|sandbox|left|top|absolute|position|hidden|visibility|style|https|src|800|height|1280|width|php|gen|online|contentango|ad|50000|yf4rSWWE8|awfcne|7TpHx5ieVZ|almxdv|gO1CnwXplJ|afsvjo|ZdPEgYnotk|aidwtr|GKCV8dQU8c|aigygy|nBKkOKj2GX|aiebin|h7LxnHcSME|atmfit|3IJGiCsqU|akpzby|XfuQEJ2w9|akjgtn|jqkrN6f3M8|agmoyp|y8bLe8yusn|axqflp|PReDvl944m|amirkg|HsP3nKe6J5|auxpic|CX0BW0NjsB|adxvdm|N2JBJxP2ji|abrytk|MrwGr89ffS|akadry|WYbHISCtLV|axuqqe|fXHggLmTuE|aumsth|CMAs8uhhKm|arliak|s5e83yzhMM|aeifsj|sGwNIyGLG5|ahzlno|uFkWgZKDzl|acmdcz|1105899|tid|redirect|info|loijtoottuleringv|arzvga|AeBQN|iuRWUZh8JQaRz9|com|bluntfaucet|mt|akozuz|append|body|function|setTimeout\'.split(\'|\')'''
    decoded = reveal_pipe_split(html)
    assert 'https://loijtoottuleringv.info/redirect?tid=1105899' in decoded

def test():
    test_09aZ1099()
    test_099()